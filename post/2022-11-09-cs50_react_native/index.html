<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css type=text/css media=all><title>uzak.github.io | CS50 React Native</title></head><body><div id=content><header><div class=site-title><a href=/>uzak's weblog</a></div><div class=site-description><nav><a href=/micro>micro/</a>
<a href=/post>blog/</a>
<a href=/etym/>etymolog/</a>
<a href=/wikis/>wiki/</a>
<a href=/about>about</a>
<a href=/index.xml>rss</a></nav></header><article class=post><header class=post-header><h1 style=text-align:center>CS50 React Native</h1><div class=post-metadata><time datetime=2022-11-09T00:00:00Z>November 09, 2022</time> &nbsp;</div></header><div class=post-toc><div class=post-toc-title>Table of Contents</div><nav id=TableOfContents><ul><li><a href=#lecture-0-js>Lecture 0: JS</a></li><li><a href=#lecture-1-js-es6>Lecture 1: JS, ES6</a></li><li><a href=#lecture-2-react-props-state>Lecture 2: React, Props, State</a></li><li><a href=#lecture-3-react-native>Lecture 3: React Native</a></li><li><a href=#lecture-4-lists-user-input>Lecture 4: Lists, User Input</a></li><li><a href=#lecture-5-user-input-debugging>Lecture 5: User Input, Debugging</a></li><li><a href=#lecture-6-navigation>Lecture 6: Navigation</a></li><li><a href=#lecture-7-data>Lecture 7: Data</a></li><li><a href=#lecture-8-expo-components>Lecture 8: Expo Components</a></li><li><a href=#lecture-9-redux>Lecture 9: Redux</a></li><li><a href=#lecture-10-redux-tools>Lecture 10: Redux, Tools</a></li></ul></nav></div><div class=post-text><p><a href="https://www.youtube.com/watch?v=X52b-8y2Hf4&amp;list=PLLea03u4b2pZY6paU-jlGzuHHURF-5kFm">Youtube</a></p><h2 id=lecture-0-js>Lecture 0: JS</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/0/lecture0.pdf>slides</a></p><ul><li>Introduction</li><li>Course information</li><li>Syntax</li><li>Types<ul><li>dynamic types</li><li>primitive types (no methods, immutable)<ul><li>undefined</li><li>null</li><li>boolean</li><li>number</li><li>string</li><li>(symbol)</li></ul></li><li>objects</li></ul></li><li>Typecasting<ul><li>explicit</li><li>implicit</li><li>== (coerces the types) vs === (requires equivalent types)</li><li>falsy<ul><li>undefined</li><li>null</li><li>false</li><li>+0, -0, NaN</li><li>""</li></ul></li><li>truthy<ul><li>{}</li><li>[]</li><li>everything else</li></ul></li></ul></li><li>Type demo<ul><li>typeof operator</li></ul></li><li>Objects<ul><li><code>const o = new Object()</code> OR <code>const o2 = {}; o2.firstName = ''</code> OR <code>const o3 = { firstName: '', greet(): function() {} }</code></li><li>Arrays, Functions - are objects</li><li>Everything but primitive datatypes are objects</li><li>Anything between [] when indexing will be coerced to a string. E.g. <code>o[1]</code> -> <code>o["1"]</code></li><li>Primitives are immutable, objects are mutable and stored by reference</li><li><code>Object.assign({}, o)</code> -> shallowCopy. Merges 1st arg into o.</li></ul></li><li>Objects demo</li><li>Object mutation<ul><li><code>Object.assign(target, source)</code>: The Object.assign() method copies all enumerable own properties from one or more source objects to a target object. It returns the modified target object.</li></ul></li><li>Prototypical inheritance<ul><li>Each objects stores a reference to its prototype (<code>obj.__proto__</code>)</li><li>Properties/methods defined most tightly have most priority</li><li>JS will automatically &ldquo;box&rdquo; (wrap) primitive values so you have access to methods.<ul><li><code>42 instanceof Number</code> -> <code>false</code></li></ul></li><li>Prototypical inheritance (reference to prototype instead of copies) is used to save resources.</li><li>Danger: if you change the prototype it changes for every single value of that type. <strong>DON&rsquo;T change prototype</strong>.</li></ul></li><li>Scope<ul><li>variable lifetime<ul><li>lexical scoping (var): declared until their function ends</li><li>block scoping (const, let)</li></ul></li><li>variables without cost/let are global</li><li>hoisting - take the definition and hoist it to the top of the file<ul><li>var declaration</li><li>function definition</li></ul></li></ul></li><li>JS engine<ul><li>read entire file, throw a syntax error if found and store functions will be saved in memory</li><li>execute it</li></ul></li><li>Global Object<ul><li>all variables and functions are parameters and methods on the global object:<ul><li>Browser: <code>window</code></li><li>Node.js: <code>global</code></li></ul></li></ul></li><li>Closures<ul><li>functions that refer to variables declared by parent function</li><li>possible because of scoping</li></ul></li></ul><h2 id=lecture-1-js-es6>Lecture 1: JS, ES6</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/1/lecture1.pdf>slides</a></p><ul><li>IIFE: immediately invoked function expression<ul><li>creates closure</li><li>doesn&rsquo;t add or modify to global object</li></ul></li><li>first-class functions: functions are treated the same way as any other value<ul><li>can be used as value, passed as arguments, returned</li><li>allows for creation of higher-order functions<ul><li>either takes one or more functions as arguments or returns a function</li><li>map(), filter(), reduce()</li></ul></li></ul></li><li>JS is synchronous and single-threaded<ul><li>a function that takes a long time to load will make the page unresponsive</li></ul></li><li><a href=https://javascript.plainenglish.io/what-is-synchronous-async-single-threaded-execution-context-browser-apis-256d906b186d>Asynchronous JS</a>:<ul><li>Execution Stack<ul><li>Functions invoked by other functions get added to the stack</li><li>When functions complete, they are removed from the stack and frame below continues executing</li></ul></li><li>Browser APIs: get run by the browser, not necessarily by JS itself<ul><li>setTimeout()</li><li>fetch(), XMLHttpRequest(), JQuery.ajax()</li><li>DB Calls</li></ul></li><li>Function Queue: is for API functions. As soon as the stack is empty whatever is in the queue will be put on the stack.</li><li>Event Loop:<ul><li>check if there is anything on the stack</li><li>check if there is anything in the function queue ready to go onto the stack</li></ul></li></ul></li><li>Callback:<ul><li>Control the flow of async calls</li><li>Execute a function once async call returns a value</li></ul></li><li>Promises:<ul><li><code>fetch().then().then(),catch()</code></li></ul></li><li>Async/Await<ul><li>Introduced in ES2017</li><li>Allows to write async code as if it were synchronous</li></ul></li><li>this:<ul><li>refers to an object that&rsquo;s set at the creation of a new execution context</li><li>in the global exec context, refers to global context</li><li>if function is a method of an objects, it is the object the method is bound to</li><li>Set <code>this</code> manually:<ul><li>bind() - binds a object to an method explicitly and returns the fct</li><li>call() - calls a function with given <code>this</code> and arguments</li><li>apply() - calls a function with given <code>this</code> and arguments provided as array</li><li>=> <code>this</code> doesn&rsquo;t have an own binding</li></ul></li></ul></li></ul><h2 id=lecture-2-react-props-state>Lecture 2: React, Props, State</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/2/lecture2.pdf>slides</a></p><ul><li>Classes<ul><li>introduced in ES6</li><li><code>new, constructor, extends, super</code></li><li><code>get size()</code> -> getter for size property</li></ul></li><li>React:<ul><li>allows to write declarative views that &ldquo;react&rdquo; to changes in data</li><li>allows to abstract complex problems into smaller components</li></ul></li><li>Imperative vs. Declarative: How vs What</li><li>React:<ul><li>Declarative</li><li>Performant:<ul><li>reconciliation - sync changes in the app state to the DOM for better performance:<ul><li>reconstructs virtual DOM</li><li>diffs the virtual DOM against the DOM</li></ul></li></ul></li></ul></li><li>Writing React:<ul><li>JSX:<ul><li>XML like syntax that transpiles to JS</li><li>lowercase tags are treated as HTML/SVG tags, uppercase as custom components</li></ul></li><li>Components are just functions:<ul><li>Returns a node (something React can render, e.g. a )</li><li>receives an object of properties that are passed to the element</li></ul></li><li>Props:<ul><li>changes to the props will cause a recomputation of the returned node (render)</li><li>Unlike HTML, props can be any JS value</li></ul></li></ul></li><li>arrow notation has an implicit return if you don&rsquo;t have braces</li><li>State:<ul><li>internally-managed configuration for any component</li><li><code>this.state</code>,</li><li><code>this.setState()</code>:<ul><li>calls are batched and run asynchronously</li><li>pass a function (<code>(prevState) => {count: prevState.count + 1}</code>) for an immediate update</li></ul></li><li>changes in state also cause re-renders</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>props</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>increaseCount</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({<span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>count</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>})
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>increaseCount</span>()}&gt;<span style=color:#a6e22e>Increase</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>h2</span>&gt;{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>count</span>}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><code>...arr</code> pulls out all the values out of <code>arr</code></li><li>React paradigm: if you ever change something, replace it with something new.</li></ul><h2 id=lecture-3-react-native>Lecture 3: React Native</h2><p><a href=http://cdn.cs50.net/mobile/2018/spring/lectures/3/lecture3.pdf>slides</a></p><ul><li>React Native:<ul><li>JS is bundled:<ul><li>transpiled and minified</li></ul></li><li>separate threads for UI, layout and JS</li><li>communicate asynchronously through a &ldquo;bridge&rdquo;:<ul><li>JS thread will request UI elements to be shown</li><li>JS thread can be blocked and UI will still work</li></ul></li></ul></li><li>Differences between RN and React<ul><li>Base components</li><li>Style</li><li>No browser APIs<ul><li>CSS animations, Canvas, SVG</li><li>Some have been polyfied</li></ul></li><li>Navigation</li></ul></li><li><a href=https://reactnative.dev/docs/components-and-apis>React Native Components</a>:<ul><li>div -> View</li><li>span -> Text: all text must be wrapped by this</li><li>button -> Button</li><li>ScrollView</li></ul></li><li>Style<ul><li>CSS like properties, <code>style</code> prop</li><li>Flexbox layout with vertical placement default</li><li>Length are unitless umbers</li><li><code>StyleSheet.create()</code></li></ul></li><li>Event Handling<ul><li>Unlike web, not every component has every interaction</li><li>Only a few &ldquo;touchable&rdquo; components<ul><li>Button</li><li>Touchable*</li></ul></li></ul></li><li>Components<ul><li>Return a node (something that can be rendered)</li><li>Represent a discrete piece of the UI</li><li>&ldquo;All React components must act like pure functions with respect to their props.&rdquo;</li><li>Two types<ul><li>Stateless Functional Components (SFC) a.k.a. Pure Function Component.<ul><li>Pure because it should not have any side effects like setting values or updating arrays&mldr;</li><li>Any change in props will cause the function to be re-invoked</li></ul></li><li>subclass of React.Component<ul><li>Can maintain their own state</li><li>Have lifecycle methods</li><li>Rendering now becomes a function of props and class properties</li></ul></li></ul></li></ul></li><li><a href=https://reactjs.org/docs/react-component.html>Component Lifecycle</a><ul><li>Mount -> Update Cycle -> Unmount</li></ul></li><li>Mount<ul><li><code>constructor(props)</code></li><li><code>render()</code><ul><li>return a node</li></ul></li><li><code>componentDidMount()</code><ul><li>Do anything that isn&rsquo;t needed for UI (async actions, timers, &mldr;)</li><li>Setting state here will cause a re-render before updating the UI</li></ul></li></ul></li><li>Update:<ul><li><code>componentWillReceiveProps(nextProps)</code><ul><li>update any state fields that rely on props</li></ul></li><li><code>shouldComponentUpdate(nextProps, nextState)</code><ul><li>compare changed values, return true if the component should render<ul><li>If returned false, the update cycle terminates</li></ul></li><li>Almost always a premature optimization</li></ul></li><li><code>render()</code></li><li><code>componentDidUpdate(prevProps, prevState)</code><ul><li>Do anything that isn&rsquo;t needed for UI (network requests, etc.)</li></ul></li></ul></li><li>Unmount<ul><li><code>componentWillUnmount()</code><ul><li>clean up<ul><li>remove event listeners</li><li>invalidate network requests</li><li>clear timeouts/intervals</li></ul></li></ul></li></ul></li><li>Expo<ul><li>Snack - run React Native in the browser</li><li>XDE - a GUI to serve, share, publish Expo projects</li><li>CLI for the same</li><li>Client - run on the phone while developing</li><li>SDK</li></ul></li><li>Import/Export<ul><li>Split components into their own files:<ul><li>Helps organize projects</li><li>Export and the import the component</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Count.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>num</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Count</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Other</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>Other</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// App.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>Count</span>, <span style=color:#a6e22e>num</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./Count.js&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Other</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./Count.js&#39;</span>  <span style=color:#75715e>// import whatever the default is in Count.js and call it &#39;Other&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// or import Other, {num} from &#39;./Count.js&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> <span style=color:#a6e22e>extens</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span>
</span></span></code></pre></div><ul><li>PropTypes<ul><li>React can validate the types of component props at runtime</li><li>Helps document your components&rsquo; APIs</li><li>Only runs in development mode</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>PropTypes</span> <span style=color:#a6e22e>form</span> <span style=color:#e6db74>&#39;prop-types&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Count</span>.<span style=color:#a6e22e>propTypes</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PropTypes</span>.<span style=color:#a6e22e>number</span>.<span style=color:#a6e22e>isRequired</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// OR preferred:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Count</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>propTypes</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PropTypes</span>.<span style=color:#a6e22e>number</span>.<span style=color:#a6e22e>isRequired</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=lecture-4-lists-user-input>Lecture 4: Lists, User Input</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/4/lecture4.pdf>slides</a></p><ul><li>In mobile, as opposed to web, you have to take care of scrolling manually</li><li>ScrollView:<ul><li>Will render all of its children before appearing</li><li>To render an array of data, use <code>.map()</code></li></ul></li><li>FlatList:<ul><li>virtualized: only renders what&rsquo;s needed at a time<ul><li>Only the visible rows are rendered in the first cycle.</li><li>props: <code>data</code>, <code>renderItem</code> (<code>obj => {...}</code>)</li><li>only updates if props are changed<ul><li>immutability is important</li></ul></li></ul></li></ul></li><li>SectionList<ul><li>Like <code>FlatList</code> with additional support for sections</li><li>Instead of <code>data</code> prop, define <code>sections</code><ul><li>Each section has it&rsquo;s own data array</li><li>Each <code>section</code> can override the <code>renderItem</code> function</li></ul></li><li>Pass a <code>renderSectionHeader</code> function for section headers</li></ul></li><li>User Input<ul><li>Controlled (by react) vs. uncontrolled component (by the DOM)<ul><li>Where is the source of the truth for the value of an input</li></ul></li><li>React recommends always using controlled components</li><li><code>&lt;TextInput /></code>: Pass <code>value</code> and <code>onChangeText</code> props</li></ul></li></ul><h2 id=lecture-5-user-input-debugging>Lecture 5: User Input, Debugging</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/5/lecture5.pdf>slides</a></p><ul><li>test for a number: <code>+variable</code> -> number / 0 / NaN</li><li>Validating Input<ul><li>Conditionally set state based on input value</li><li>Validate form after changing single input value<ul><li><code>this.setState()</code> can take a callback as a second argument (validator), that gets executed after setting the state.</li><li>or <code>componentDidUpdate()</code> which is called after <code>setState()</code></li></ul></li></ul></li><li>KeyboardAvoidingView</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#75715e>// generic update function - less efficient than genering all handlers as class properties!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>getHandler</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span> =&gt; <span style=color:#a6e22e>val</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({[<span style=color:#a6e22e>key</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>val</span>})
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>TextInput</span> <span style=color:#a6e22e>onChangeText</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getHandler</span>(<span style=color:#e6db74>&#39;name&#39;</span>)} /&gt;
</span></span></code></pre></div><ul><li>KeyboardAvoidingView</li><li>Debugging<ul><li>aggressive: <code>console.error()</code> or <code>throw new Error('...')</code></li><li>warnings: <code>console.warn()</code> are yellow banners and do not appear in production mode</li><li><code>console.log()</code> might have problems with circular JSON, unless run in remote debugger</li></ul></li><li>Chrome Devtools:<ul><li>Hardware / Shake my device / remote debugger</li></ul></li><li>React Native Inspector<ul><li>Hardware / Shake my device / toggle native inspector</li></ul></li><li>react-devtools<ul><li><code>npm install -g react-devtools</code></li><li>run: <code>react-devtools</code></li></ul></li><li>External libs: since RN is native JS, you can add any JS library</li></ul><h2 id=lecture-6-navigation>Lecture 6: Navigation</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/6/lecture6.pdf>slides</a></p><ul><li><code>yarn add react-navigation</code></li><li><code>SwitchNavigator</code>: function that returns a component to be returned in <code>App.render()</code></li><li>convention is to have <code>./screens/${NAME}Screen.js</code></li><li><code>&lt;AppNavigator screenProps={} /></code> - <code>screenProps</code> are made available to every screen component in the navigator<ul><li>good for prototyping</li><li>bad performance for big applications, better use Redux</li></ul></li><li><code>StackNavigator</code>. Supports history.<ul><li><code>static navigationOptions = { ... }</code> for a component</li></ul></li><li>You can pass parameters in Navigators between routes:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>navigation</span>.<span style=color:#a6e22e>navigate</span>(<span style=color:#e6db74>&#39;RouteName&#39;</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paramName</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;value-of-param&#39;</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>navigation</span>.<span style=color:#a6e22e>setParams</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paramName</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;new-value-of-param&#39;</span>,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>navigation</span>.<span style=color:#a6e22e>getParam</span>(<span style=color:#e6db74>&#39;paramName&#39;</span>, <span style=color:#e6db74>&#39;default-value&#39;</span>);
</span></span></code></pre></div><ul><li><code>TouchableOpacity</code> to make a view pressable.</li><li><code>StackNavigator.push()</code> instead of <code>navigate()</code> for pushing a new screen even if on the same screen.</li><li>Composing navigators<ul><li>Never render a navigator inside a screen. Only in the top level component.</li><li>You can <code>navigate()</code> to a navigator as well (goes to <code>initialRouteName</code>)</li></ul></li><li>TabNavigator<ul><li>The state of inactive screens is maintained</li><li>Use icons instead of only labels: <code>yarn add react-native-vector-icons</code></li></ul></li></ul><h2 id=lecture-7-data>Lecture 7: Data</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/7/lecture7.pdf>slides</a></p><ul><li><a href=https://randomuser.me>https://randomuser.me</a></li><li><code>fetch(url, config)</code> is polyfiled. <code>config</code> is optional. Returns a promise.</li><li>Promises<ul><li>.<code>then()/.catch()</code></li></ul></li><li>Async/Await: within an <code>async</code> function we can <code>await</code> the value of another async function or Promise.<ul><li>Use <code>try/catch</code> to handle errors.</li></ul></li><li>componentDidMount()<ul><li><code>fetch(url)</code></li><li>extract json</li><li><code>this.setState()</code></li></ul></li><li>Transforming data<ul><li>doing it early gives us an abstraction layer and is more efficient, therefore:</li><li>api.js<ul><li>fetchUsers()</li><li>processContanct() // transformation</li></ul></li></ul></li><li>Authentication<ul><li>to prove ID</li></ul></li><li>HTTP status codes<ul><li>check for <code>response.ok</code></li></ul></li><li>JSX: TAG <code>parameter={true}</code> shortcut is <code>parameter</code></li></ul><h2 id=lecture-8-expo-components>Lecture 8: Expo Components</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/8/lecture8.pdf>slides</a></p><ul><li>Maps and Location<ul><li>&lt;Expo.MapView /></li><li><code>let {status} = Expo.Permissions.askAsync(Expo.Permissions.LOCATION)</code></li><li>Expo.Location.getCurrentPositionAsync({})</li><li>Expo.Location.geocodeAsync(<code>{address}</code>)</li><li>Expo.Location.reverseGeocodeAsync(location.coords)</li><li>&lt;Expo.MapView.Marker /></li></ul></li><li>Compass<ul><li><code>&lt;Image source={require("./img.png")} /></code></li><li><code>&lt;ImageBackground source={require("./bg.png")} /></code></li><li>Expo.Magnetometer.addListener((v) => { &mldr; })</li><li>60FPS refresh rate on phone means 1000/60 = 16ms for updating interval</li><li>Expo.Magnetometer.removeAllListeners()</li></ul></li><li>Audio / Video</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span>&lt;<span style=color:#f92672>Expo.Video</span> <span style=color:#a6e22e>source</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>require</span>(<span style=color:#a6e22e>fn</span>)} 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resizeMode</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cover&#34;</span> 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shouldPlay</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>true</span>} 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span>{...} 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>onPlaybackStatusUpdate</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>status</span> =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>status</span>.<span style=color:#a6e22e>didJustFinish</span>) {
</span></span><span style=display:flex><span>                } 
</span></span><span style=display:flex><span>            } <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Expo</span>.<span style=color:#a6e22e>Audio</span>.<span style=color:#a6e22e>setAudioModeAsync</span>({})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>_setupAsync</span>() <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span>() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> Promise.<span style=color:#a6e22e>all</span>([
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_loadAssetsAsync</span>(),    <span style=color:#75715e>// require all the videos
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_setAudioModeAsync</span>(),
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_loadFontsAsync</span>()
</span></span><span style=display:flex><span>    ]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({ <span style=color:#a6e22e>isReady</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> (&lt;<span style=color:#f92672>Expo.AppLoading</span> /&gt;);       <span style=color:#75715e>// splashscreen
</span></span></span></code></pre></div><ul><li>A photo editor<ul><li>await Expo.Permissions.askAsync(Expo.Permissions.CAMERA_ROLL)<ul><li>check for <code>status === 'granted'</code></li></ul></li><li>Expo.ImagePicker.launchImageLibraryAsync()</li><li>Expo.ImagePicker.launchCameraAsync()</li><li>Expo.ImageManipulator.manipulate()</li><li>Expo.Camera</li><li><code>&lt;TouchableHighlight onPress={} /></code></li></ul></li></ul><h2 id=lecture-9-redux>Lecture 9: Redux</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/9/lecture9.pdf>slides</a></p><ul><li>Facebook found that MVC architecture is too complex to scale.</li><li>Facebook rearchitected into one-way data flow</li><li>Flux: an application architecture for React utilizing a unidirectional data flow<ul><li>The views react to changes ins some number of &ldquo;stores&rdquo;</li><li>The only thing that can update data in a store is a &ldquo;dispatcher&rdquo;</li><li>The only way to trigger the dispatcher is by invoking &ldquo;actions&rdquo;</li><li>Actions are triggered from views</li></ul></li><li><a href=https://redux.js.org>Redux</a>: data management library inspired by Flux<ul><li>single source of truth for all the data</li><li>the only way to update the state is by an action</li><li>updates are made using pure functions - deterministic function that takes arguments and always returns the same thing for them and doesn&rsquo;t have side-effects (no prints etc.)</li><li>Action -> Store -> Views (which can trigger actions)</li><li>Unlike in flux there is only a singular store</li></ul></li><li>simpleReact (example redux implementation)<ul><li>Reducer:<ul><li>takes the previous state and update and applies the update</li><li>should be a pure function</li><li>should be immutable - return a new object</li></ul></li><li>Store<ul><li>responsible for maintaining state</li><li>exposes getter via <code>getState()</code></li><li>can be updated by using <code>dispatch()</code></li><li>Can add listeners that get invoked when state changes</li></ul></li><li><a href=https://github.com/redux-utilities/flux-standard-action>Action</a><ul><li>piece of data that contains all the information required to make a state update. Usually objects with a type key</li><li>functions that create actions are called action creators</li><li>actions must be dispatched</li></ul></li></ul></li><li><code>npm install redux</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>contacts</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>getState</span>().<span style=color:#a6e22e>contacts</span>       <span style=color:#75715e>// in render()
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// in AddContactScreen.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>addContact</span>({<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>formState</span>.<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>phone</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>formState</span>.<span style=color:#a6e22e>phone</span>}))
</span></span></code></pre></div><ul><li><code>npm install react-redux</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// in ContactListScreen.js
</span></span></span><span style=display:flex><span><span style=color:#75715e>// only bind this component to contacts
</span></span></span><span style=display:flex><span><span style=color:#75715e>// and this gives us this.props.contacts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mapStateToProps</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span> =&gt; ({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>contacts</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>contacts</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>connect</span>(<span style=color:#a6e22e>mapStateToProps</span>)(<span style=color:#a6e22e>contactListScreen</span>)
</span></span></code></pre></div><h2 id=lecture-10-redux-tools>Lecture 10: Redux, Tools</h2><p><a href=https://cdn.cs50.net/mobile/2018/spring/lectures/10/lecture10.pdf>slides</a></p><ul><li>Review: <code>react-redux</code><ul><li><code>&lt;Provider /></code> gives children access to our redux store</li><li><code>connect()</code> helps us subscribe to any subset of our store and bind our action creators</li></ul></li><li>Supporting Async Request:<ul><li><code>Store.dispatch()</code> needs to accept other types</li></ul></li><li><code>npm install isomorphic-fetch</code> - fetch implementation for node.js</li><li><a href=https://github.com/reduxjs/redux-thunk>Redux Middleware</a>:<ul><li>Allows to extend redux without having to touch the implementation</li><li>Any function with this prototype can be middleware:<ul><li><code>({getState, dispatch}) => next => action => void</code></li></ul></li><li>Middleware is the chain by which we just can keep passing actions down the chain and modify it however we want.</li><li>A <code>thunk</code> is a function what wraps an expression to delay its evaluation</li></ul></li><li><code>React.Component.componentWillReceiveProps(nextProps)</code></li><li>Persisting State<ul><li><a href=https://github.com/rt2zz/redux-persist>redux-persist</a>:<ul><li>abstracts out the storage of the store into AsyncStorage</li><li>Gives us <code>persistStore</code>, <code>persistReducer</code>, <code>&lt;PersistGate /></code>:<ul><li>Automatically stores the state at every change</li><li>Automatically rehydrates the store when the app is re-opened</li><li>Will display loading screen while waiting for store to rehydrate</li></ul></li></ul></li></ul></li><li><a href=https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0>Container vs. Presentational Components</a></li><li>Redux helps apps scale, but does add complexity:<ul><li>Is the complexity worth it?</li><li>Do as much as you can with local component state, then add redux if you hit pain points</li></ul></li><li>Tools:<ul><li>Babel - transpile all down to a language all browsers will understand</li><li>@std/esm - use import/export statements in node</li><li>Chrome devtools</li><li>React/Redux devtools</li><li><a href=https://github.com/eslint/eslint>ESLint</a><ul><li><code>npm install -g eslint</code></li><li><code>npx eslint --init</code> - local config</li><li><code>eslint init</code> - global config</li><li><code>npx eslint fileToCheck.js</code></li><li><a href=https://github.com/kensho-technologies/eslint-config>kensho config</a></li></ul></li><li><a href=https://github.com/prettier/prettier>Prettier</a><ul><li>integrates with ESLint through <code>--fix</code> option</li></ul></li><li>Typescript - statically check types</li><li>NPM<ul><li>to be able to do <code>npm run lint</code> add <code>package.json</code>:</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;lint&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;eslint api.js screens/&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span></code></pre></div><ul><li>npm trick:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm update
</span></span><span style=display:flex><span>npm install -g npm-check-updates
</span></span><span style=display:flex><span>ncu -u
</span></span></code></pre></div><div class=music></div></div><footer class=post-footer><p class=post-tags><hr>Tags: <i class="fas fa-tags"></i>
<a href=/tags/it>it</a>
&nbsp;
<a href=/tags/react>react</a>
&nbsp;</p></footer></article></div></body></html>